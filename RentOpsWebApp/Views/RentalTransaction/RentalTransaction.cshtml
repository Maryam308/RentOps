@model IEnumerable<RentOpsObjects.Model.RentalTransaction>;
@{
    ViewData["Title"] = "RentalTransaction";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h1>RentalTransaction</h1>
<br />

<h2>Website Rental Requests</h2>

<table class="table table-striped">
	<thead>
		<tr class="text-center">
			<th>Rental Transaction ID</th>
			<th>Rental Request ID</th>
			<th>Employee ID</th>
			<th>Employee Name</th>
			<th>Customer ID</th>
			<th>Customer Name</th>
			<th>Rental Fee</th>
			<th>Pickup Date</th>
			<th>Return Date</th>
			<th>Equipment Name</th>
			<th>Payment Status</th>
			<th></th>
		</tr>
	</thead>
	<tbody>
		@foreach (var record in Model)
		{
			@if (record.UserId == null && record.RentalRequest != null)
			{

			<tr class="text-center">
				<td>@record.RentalTransactionId</td>
				<td>@record.RentalRequestId</td>
				<td>@record.EmployeeId</td>
				<td>@record.Employee.FirstName @record.Employee.LastName</td>
				<td>@record.RentalRequest.UserId </td>
				<td>@record.RentalRequest.User.FirstName @record.RentalRequest.User.LastName </td>	
				<td>@record.RentalFee</td>
				<td>@record.PickupDate</td>
				<td>@record.ReturnDate</td>
				<td>@record.Equipment.EquipmentName</td>
				<td>
					@(record.PaymentId == null ? "Not Paid" : "Paid")
				</td>
				<td>
					<a asp-action="Edit" asp-route-id="@record.RentalRequestId" class="btn btn-primary">Edit</a>
					@* <a asp-action="Delete" asp-route-id="@record.RentalRequestId" class="btn btn-danger">Delete</a> *@
				</td>
			</tr>
			}}
	</tbody>

	</table>


<br />
<br />
<h3>External Rental Requests</h3>
<br />
	
	<table class="table table-striped">
		<thead>
			<tr class="text-center">
				<th>Rental Transaction ID</th>
				<th>Employee ID</th>
				<th>Employee Name</th>
				<th>Customer ID</th>
				<th>Customer Name</th>
				<th>Rental Fee</th>
				<th>Pickup Date</th>
				<th>Return Date</th>
				<th>Equipment Name</th>
				<th>Payment Status</th>
				<th></th>
			</tr>
		</thead>
		<tbody>
			@foreach (var record in Model)
			{
				@if (record.UserId != null && record.RentalRequest == null)
				{

					<tr class="text-center">
						<td>@record.RentalTransactionId</td>
						<td>@record.EmployeeId</td>
						<td>@record.Employee.FirstName @record.Employee.LastName</td>
						<td>@record.UserId </td>
						<td>@record.User.FirstName @record.User.LastName </td>
						<td>@record.RentalFee</td>
						<td>@record.PickupDate</td>
						<td>@record.ReturnDate</td>
						<td>@record.Equipment.EquipmentName</td>
						<td>
							@(record.PaymentId == null ? "Not Paid" : "Paid")
						</td>
						<td>
							<a asp-action="Edit" asp-route-id="@record.RentalRequestId" class="btn btn-primary">Edit</a>
							@* <a asp-action="Delete" asp-route-id="@record.RentalRequestId" class="btn btn-danger">Delete</a> *@
						</td>
					</tr>
				}		}
		</tbody>
</table>